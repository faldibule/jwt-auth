<div class="container">
  <div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-6">
      <div class="card mb-3">
        <img style="height: 500px; object-fit: cover; object-position: center" src="<%= post.image %>" class="card-img-top" alt="..." />
        <div class="card-body">
          <h5 class="card-title"><%= post.title %></h5>
          <div class="text-secondary"><a href="" class="text-secondary"><%= post.category %> </a> Â· <%= createdAt %></div>
          <hr />
          <div class="media my-3 d-flex">
            <img width="60" style="height: 60px; object-fit:cover; object-position: center; " class="rounded-circle me-3" src="<%= post.user.image %>" />
            <div class="media-body">
              <div class=""><%= post.user.nama %></div>
              <%= post.user.email %>
            </div> 
          </div>
          <hr />
          <p class="card-text"><%= post.body %></p>
          <div class="text-secondary mb-2"><% post.tags.forEach(tag => { %> #<%= tag.tag %> <% }) %></div>
          <% if (cek) { %>
          <div class="col-md-6 d-flex">
            <form action="/post?_method=DELETE" method="post">
              <input type="hidden" name="id" value="<%= post._id %>" />
              <button onclick="return confirm('Yakin ?')" type="submit" class="btn btn-sm btn-danger me-3">Delete</button>
            </form>
            <a href="/post/update/<%= post.id  %>" class="btn btn-sm btn-success">Update</a>
          </div>
          <% } %>
          <hr>
          <div class="comment">
            <p><%= comments.length %> Komentar</p>
            <% comments.forEach(element => { %>
              <div class="comment-warp d-flex">
                <img style="width: 50px; height: 50px; object-fit:cover; object-position: center; " class="img-thumbnail rounded-circle" src="<%= element.user.image %>" alt="">
                <div class="comment-body">
                  <% if (user.id == post.user._id || user.id == element.user._id) { %>
                    <div class="dropend">
                      <p class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                        <span class="fw-bold"><%= element.user.nama %></span> <br><span class="fw-normal"><%= element.body %></span>
                      </p>
                      <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <li><form action="/comment?_method=DELETE" method="post" class="dropwdown-item">
                          <input type="hidden" name="id" value="<%= element._id %>" />
                          <input type="hidden" name="postId" value="<%= post.id %>" />
                          <button onclick="return confirm('Yakin ?')" type="submit" class="dropdown-item">Delete</button>
                        </form></li>
                      </ul>
                    </div>
                  <% }else{ %>
                    <p><span class="fw-bold"><%= element.user.nama %></span> <br><span class="fw-normal"><%= element.body %></span></p>
                  <% } %> 
                </div>
                
              </div>
            
            <% }) %>
            <div class="comment-form d-flex">
              <img style="width: 50px; height: 50px; object-fit:cover; object-position: center; " class="img-thumbnail rounded-circle" src="<%= user.image %>" alt="">
              <form action="/comment" method="post">
                <input type="hidden" name="postId" value="<%= post.id %>">
                <input type="hidden" name="userId" value="<%= user.id %>">
                <div class="input-group mb-3" style="width: 33vw">
                  <input type="text" class="form-control bg-light" aria-describedby="button-addon2" id="inputtext" name="body">
                  <button class="btn btn-outline-secondary" type="submit" id="button-addon2"><i class="bi bi-signpost-fill"></i> Post</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3"></div>
  </div>
  <div class="row"></div>
</div>

<script>
  const b = document.getElementById('button-addon2');
  const input = document.getElementById("inputtext");
  b.disabled = true;
  
  input.addEventListener('input', function() {
    if(input.value === ""){
      b.disabled = true;
    }
    else{
      b.disabled = false;
    }
  });
</script>